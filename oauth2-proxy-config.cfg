provider = "oidc"

skip_oidc_discovery = true
oidc_issuer_url = "http://localhost:8080/auth"

login_url = "http://localhost:8080/auth/authorize"
redeem_url = "http://kubarr-dashboard.kubarr-system.svc.cluster.local:8000/auth/token"
validate_url = "http://kubarr-dashboard.kubarr-system.svc.cluster.local:8000/auth/userinfo"
oidc_jwks_url = "http://kubarr-dashboard.kubarr-system.svc.cluster.local:8000/auth/jwks"

client_id = "oauth2-proxy"
redirect_url = "http://localhost:8080/oauth2/callback"

cookie_name = "_oauth2_proxy"
cookie_httponly = true
cookie_samesite = "lax"
cookie_expire = "168h"
cookie_secure = false

email_domains = [
  "*",
]

ssl_insecure_skip_verify = true
insecure_oidc_skip_issuer_verification = true

upstreams = [
  "http://localhost:8080"
]

request_logging = true
auth_logging = true
standard_logging = true

session_store_type = "cookie"

http_address = "0.0.0.0:4180"

pass_access_token = true
pass_authorization_header = true
pass_user_headers = true
set_authorization_header = true
set_xauthrequest = true

user_id_claim = "email"

oidc_email_claim = "email"
oidc_groups_claim = "groups"

skip_provider_button = true

skip_auth_routes = [
  "^/ping$",
  "^/ready$",
  "^/auth/.*",
  "^/assets/.*"
]
