namespace:
  create: false  # kubarr deployment manager creates the namespace
  name: promtail

promtail:
  image:
    repository: grafana/promtail
    tag: "2.9.3"
    pullPolicy: IfNotPresent

  resources:
    requests:
      cpu: 50m
      memory: 64Mi
    limits:
      cpu: 200m
      memory: 256Mi

  # Loki push endpoint
  lokiUrl: "http://loki.loki.svc.cluster.local:3100/loki/api/v1/push"

  # Container log paths on host
  containerLogPath: /var/log/containers
  podLogPath: /var/log/pods

  # Namespaces to collect logs from (regex)
  namespaceFilter: "(sonarr|radarr|qbittorrent|transmission|deluge|rutorrent|jellyfin|jellyseerr|jackett|sabnzbd|kubarr-system|prometheus|loki|promtail|grafana)"

rbac:
  create: true

serviceAccount:
  create: true
  name: promtail

tolerations:
  - effect: NoSchedule
    operator: Exists
  - effect: NoExecute
    operator: Exists

podAnnotations: {}

# Network policy configuration
networkPolicy:
  enabled: true
  # Promtail needs to send logs to Loki
  egressTo:
    - loki
