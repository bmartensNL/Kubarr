namespace:
  create: false  # kubarr deployment manager creates the namespace
  name: prometheus

prometheus:
  replicaCount: 1

  image:
    repository: prom/prometheus
    tag: "v2.48.0"
    pullPolicy: IfNotPresent

  service:
    type: ClusterIP
    port: 9090
    targetPort: 9090

  # External URL for Prometheus (behind reverse proxy)
  externalUrl: "/prometheus"
  routePrefix: "/prometheus"

  resources:
    requests:
      cpu: 200m
      memory: 512Mi
    limits:
      cpu: 1000m
      memory: 2Gi

  retention: "15d"
  retentionSize: "15GB"

  scrapeInterval: "30s"
  evaluationInterval: "30s"

  livenessProbe:
    enabled: true
    initialDelaySeconds: 30
    periodSeconds: 15
    timeoutSeconds: 10
    failureThreshold: 3

  readinessProbe:
    enabled: true
    initialDelaySeconds: 5
    periodSeconds: 5
    timeoutSeconds: 5
    failureThreshold: 3

persistence:
  enabled: true
  size: 20Gi
  storageClass: ""
  accessMode: ReadWriteOnce

rbac:
  create: true

serviceAccount:
  create: true
  name: prometheus

nodeSelector: {}
tolerations: []
affinity: {}
podAnnotations: {}

# Network policy configuration
networkPolicy:
  enabled: true
  ingressFrom:
    - nginx  # nginx reverse proxy
    - grafana  # for queries
  # Prometheus needs to scrape all app namespaces
  scrapeNamespaces:
    - sonarr
    - radarr
    - qbittorrent
    - transmission
    - deluge
    - rutorrent
    - jackett
    - jellyfin
    - jellyseerr
    - sabnzbd
    - loki
    - promtail
