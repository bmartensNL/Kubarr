# Example values for production deployment

namespace:
  create: true
  name: oauth2-proxy

replicaCount: 2  # High availability

image:
  repository: quay.io/oauth2-proxy/oauth2-proxy
  tag: "v7.5.1"
  pullPolicy: IfNotPresent

provider:
  # Point to your Kubarr dashboard
  issuerUrl: "http://kubarr.kubarr.svc.cluster.local:8000/auth"

config:
  clientId: "oauth2-proxy"
  clientSecret: "YOUR_CLIENT_SECRET_HERE"  # Get from setup wizard
  cookieSecret: "YOUR_COOKIE_SECRET_HERE"   # Generate with: python3 -c 'import secrets; print(secrets.token_hex(16))'
  
  cookieExpire: "168h"  # 7 days
  
  emailDomains:
    - "*"  # Allow all domains, or restrict to specific domains
    # - "example.com"
    # - "company.com"
  
  redirectUrl: "https://kubarr.example.com/oauth2/callback"  # Your actual domain
  
  # Add upstream services here
  upstreams:
    - "http://kubarr:80"
    # Add media apps as needed:
    # - "http://radarr.media.svc.cluster.local:7878"
    # - "http://sonarr.media.svc.cluster.local:8989"

service:
  type: ClusterIP
  port: 4180

resources:
  limits:
    cpu: 200m
    memory: 256Mi
  requests:
    cpu: 50m
    memory: 128Mi

# Production settings
nodeSelector:
  kubernetes.io/os: linux

tolerations: []

affinity:
  podAntiAffinity:
    preferredDuringSchedulingIgnoredDuringExecution:
      - weight: 100
        podAffinityTerm:
          labelSelector:
            matchExpressions:
              - key: app
                operator: In
                values:
                  - oauth2-proxy
          topologyKey: kubernetes.io/hostname
